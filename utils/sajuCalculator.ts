interface BirthInfo {
  gender: 'male' | 'female'
  year: number
  month: number
  day: number
  hour: number
  minute: number
}

interface SajuData {
  saju: string
  ohang: string
  total: string
  health: string
  wealth: string
  love: string
  study: string
  work: string
}

export function calculateSaju(birthInfo: BirthInfo): SajuData {
  const { year, month, day, hour, minute, gender } = birthInfo
  
  // 사주팔자 계산
  const yearLastDigit = year % 10
  const monthSum = month + day
  const hourSum = hour + (gender === 'male' ? 1 : 2)
  
  // 간지 계산
  const gan = ['갑', '을', '병', '정', '무', '기', '경', '신', '임', '계'][yearLastDigit]
  const ji = ['자', '축', '인', '묘', '진', '사', '오', '미', '신', '유', '술', '해'][month % 12]
  
  // 오행 계산
  const ohangElements = ['목', '화', '토', '금', '수']
  const ohang = ohangElements[yearLastDigit % 5]
  
  // 2026년 기준 운세 계산
  const currentYear = 2026
  const age = currentYear - year
  const zodiacIndex = year % 12
  
  // 띠 계산
  const zodiac = ['원숭이', '닭', '개', '돼지', '쥐', '소', '호랑이', '토끼', '용', '뱀', '말', '양'][zodiacIndex]
  
  // 2026년 특별 운세
  const special2026Text = "2026년은 새로운 시작과 변화의 해입니다. 특히 AI와 디지털 기술의 발전으로 인해 전통적인 방식에서 벗어나 혁신적인 접근이 필요한 시기입니다."
  
  // 상세한 운세 텍스트 생성
  const totalTexts = [
    `2026년 ${age}세 ${zodiac}띠의 종합운세: 새로운 기회가 찾아올 수 있는 해입니다. 특히 3월, 7월, 11월에 중요한 변화가 있을 것으로 보입니다. 긍정적인 마음가짐을 유지하고 새로운 도전을 두려워하지 마세요. ${special2026Text}`,
    `2026년 ${age}세 ${zodiac}띠의 종합운세: 인간관계에서 좋은 소식이 있을 것입니다. 특히 5월과 9월에 새로운 인맥이 형성될 가능성이 높습니다. 주변 사람들과의 소통을 늘리고 네트워킹에 집중하세요. ${special2026Text}`,
    `2026년 ${age}세 ${zodiac}띠의 종합운세: 창의적인 아이디어가 떠오를 수 있는 해입니다. 4월과 8월에 특히 영감이 넘치는 시기가 될 것입니다. 새로운 도전과 혁신적인 접근을 시도해보세요. ${special2026Text}`,
    `2026년 ${age}세 ${zodiac}띠의 종합운세: 건강에 주의를 기울여야 하는 해입니다. 2월, 6월, 10월에 건강 관리가 특히 중요합니다. 규칙적인 생활과 적절한 운동을 통해 체력을 관리하세요. ${special2026Text}`,
    `2026년 ${age}세 ${zodiac}띠의 종합운세: 정신적인 성장과 내적 평화를 추구하는 해입니다. 금전적인 문제보다는 정신적인 풍요를 추구하는 것이 좋겠습니다. 명상이나 독서를 통해 내면을 다져보세요. ${special2026Text}`
  ]
  
  const healthTexts = [
    `2026년 건강운세: 전반적으로 건강한 상태를 유지할 수 있는 해입니다. 특히 3월과 9월에 체력이 좋아질 것으로 보입니다. 규칙적인 운동을 계속하고, 새로운 운동을 시도해보세요. 다만 7월과 12월에는 과로를 피하고 충분한 휴식을 취하시기 바랍니다.`,
    `2026년 건강운세: 스트레스 관리가 중요한 해입니다. 특히 4월과 10월에 정신적인 피로가 누적될 수 있으니 주의하세요. 충분한 휴식을 취하고, 취미 활동을 통해 스트레스를 해소하시기 바랍니다. 요가나 명상을 통해 마음의 평정을 찾아보세요.`,
    `2026년 건강운세: 면역력 강화에 집중해야 하는 해입니다. 특히 1월과 11월에 감기나 알레르기에 주의하세요. 비타민 섭취와 충분한 수면을 취하고, 규칙적인 생활 패턴을 유지하시기 바랍니다. 면역력 증진을 위한 식단 관리도 중요합니다.`,
    `2026년 건강운세: 소화기관에 주의를 기울여야 하는 해입니다. 특히 5월과 8월에 위장 건강에 신경 써야 합니다. 가벼운 식사를 하고, 과식이나 폭식을 피하시기 바랍니다. 소화에 좋은 음식을 섭취하고 규칙적인 식사 시간을 지키세요.`,
    `2026년 건강운세: 정신적인 안정을 위해 명상이나 요가를 해보세요. 특히 6월과 12월에 마음의 평정이 필요합니다. 자연과의 접촉을 늘리고, 충분한 휴식을 통해 몸과 마음을 회복하시기 바랍니다.`
  ]
  
  const wealthTexts = [
    `2026년 재물운세: 꾸준한 저축과 투자로 재물이 늘어날 수 있는 해입니다. 특히 2월과 8월에 좋은 투자 기회가 있을 것으로 보입니다. 장기적인 관점에서 안정적인 투자를 고려해보세요. 다만 5월과 11월에는 큰 지출을 피하시기 바랍니다.`,
    `2026년 재물운세: 새로운 수입원을 찾아보는 것이 좋겠습니다. 특히 3월과 9월에 부업이나 사이드 프로젝트를 통해 추가 수입을 얻을 수 있을 것입니다. 자신의 재능을 활용한 수익 창출 방법을 모색해보세요.`,
    `2026년 재물운세: 불필요한 지출을 줄이고 계획적인 소비를 해야 하는 해입니다. 특히 4월과 10월에 예산 관리가 중요합니다. 가계부를 작성하고 정기적인 재정 점검을 통해 소비 패턴을 개선하시기 바랍니다.`,
    `2026년 재물운세: 금전적인 기회가 찾아올 수 있으니 준비를 해두세요. 특히 6월과 12월에 예상치 못한 수입이 있을 가능성이 있습니다. 하지만 1월과 7월에는 투자나 대출에 신중을 기하시기 바랍니다.`,
    `2026년 재물운세: 장기적인 관점에서 투자를 고려해보세요. 특히 부동산이나 주식 투자에 관심을 가져볼 만한 시기입니다. 다만 충분한 조사와 전문가 상담을 통해 신중하게 결정하시기 바랍니다.`
  ]
  
  const loveTexts = [
    `2026년 이성운세: 새로운 인연이 생길 수 있는 해입니다. 특히 3월, 7월, 11월에 만남의 기회가 많을 것으로 보입니다. 적극적인 자세를 보이고 새로운 사람들과의 만남을 두려워하지 마세요. 온라인 데이팅이나 소개팅을 통해 인연을 찾아보세요.`,
    `2026년 이성운세: 기존 관계에서 더 깊은 이해와 소통이 필요한 해입니다. 특히 5월과 9월에 관계의 전환점이 있을 것입니다. 솔직한 대화를 통해 서로의 마음을 나누고, 함께 성장할 수 있는 방향을 모색해보세요.`,
    `2026년 이성운세: 솔직한 마음을 전하는 것이 좋겠습니다. 특히 4월과 8월에 고백이나 고백을 받을 가능성이 높습니다. 자신의 진심을 담아 전달하고, 상대방의 마음도 존중하는 자세를 보이세요.`,
    `2026년 이성운세: 서두르지 말고 천천히 관계를 발전시켜 나가세요. 특히 6월과 12월에 관계의 깊이가 더해질 것입니다. 성급한 결정보다는 시간을 두고 서로를 알아가는 것이 좋겠습니다.`,
    `2026년 이성운세: 자신을 사랑하는 마음부터 시작하세요. 특히 2월과 10월에 자아 성찰이 필요한 시기입니다. 자신의 가치를 인정하고, 건강한 자존감을 기른 후에 진정한 사랑을 찾아보세요.`
  ]
  
  const studyTexts = [
    `2026년 학업운세: 집중력이 높은 해입니다. 특히 3월, 7월, 11월에 중요한 공부나 시험 준비를 하세요. 새로운 학습 방법을 시도해보고, 온라인 강의나 디지털 도구를 활용한 학습을 고려해보세요. 2026년은 AI와 기술 발전으로 인해 새로운 학습 방식이 주목받는 해입니다.`,
    `2026년 학업운세: 새로운 지식을 습득하기에 좋은 해입니다. 특히 5월과 9월에 독서나 강의를 통해 지식을 넓혀보세요. 온라인 강의, 웨비나, 온라인 세미나 등을 적극 활용하여 지식을 쌓아보세요.`,
    `2026년 학업운세: 실무 경험을 쌓는 것이 좋겠습니다. 특히 4월과 8월에 실습이나 인턴십을 고려해보세요. 실제 업무 경험을 통해 이론을 실무에 적용해보고, 네트워킹을 통해 인맥을 넓혀보세요.`,
    `2026년 학업운세: 토론이나 그룹 스터디를 통해 지식을 공유해보세요. 특히 6월과 12월에 협력 학습이 효과적일 것입니다. 온라인 스터디 그룹이나 스터디 카페를 활용하여 함께 학습하는 환경을 만들어보세요.`,
    `2026년 학업운세: 기본기를 탄탄히 다지는 것이 중요한 해입니다. 특히 1월과 10월에 기초 학습에 집중하세요. 새로운 기술이나 트렌드를 배우기 전에 기본기를 충실히 다져두는 것이 장기적으로 도움이 될 것입니다.`
  ]
  
  const workTexts = [
    `2026년 직업운세: 새로운 프로젝트나 업무에서 좋은 성과를 낼 수 있는 해입니다. 특히 3월, 7월, 11월에 중요한 프로젝트가 시작될 가능성이 높습니다. 2026년은 디지털 전환과 AI 기술이 업무에 더욱 통합되는 해이므로, 새로운 기술을 배우고 적용하는 것이 중요합니다.`,
    `2026년 직업운세: 동료들과의 협력이 중요한 해입니다. 특히 5월과 9월에 팀워크가 성공의 열쇠가 될 것입니다. 온라인 협업 도구를 활용하여 원격 근무나 하이브리드 근무에서도 효과적으로 소통하세요.`,
    `2026년 직업운세: 창의적인 아이디어로 업무에 새로운 변화를 만들어보세요. 특히 4월과 8월에 혁신적인 접근이 필요합니다. 기존 방식에 얽매이지 말고 새로운 관점에서 문제를 해결하는 방법을 모색해보세요.`,
    `2026년 직업운세: 꾸준한 노력이 결실을 맺을 수 있는 해입니다. 특히 6월과 12월에 그동안의 노력이 인정받을 것입니다. 포기하지 말고 꾸준히 노력하되, 때로는 휴식도 취하며 지속 가능한 업무 방식을 만들어보세요.`,
    `2026년 직업운세: 새로운 도전을 두려워하지 말고 적극적으로 임하세요. 특히 2월과 10월에 새로운 기회가 찾아올 것입니다. 업무 전환, 새로운 분야 도전, 또는 창업을 고려해볼 만한 시기입니다.`
  ]
  
  const index = (yearLastDigit + monthSum + hourSum) % 5
  
  return {
    saju: `${gan}${ji}일주`,
    ohang: `${ohang} 오행`,
    total: totalTexts[index],
    health: healthTexts[index],
    wealth: wealthTexts[index],
    love: loveTexts[index],
    study: studyTexts[index],
    work: workTexts[index]
  }
}
